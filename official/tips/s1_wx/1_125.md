## 第125天: 如何定义函数


```@TencentVideo
styleID: 0
tencentVideo:
  vid: 'h322080b20m'

```

### 字幕

这一节我们来讲解NPL语言中的最后一种数据类型: **函数function**。

**我们讲过程序的本质是输入和输出。而函数正是建立从输入到输出关系的方法。**

其实，在之前的章节中，我们已经使用过很多系统函数。
例如log，moveTo，turnTo；
操作符例如`+-*/ .. == > <`，以及`=`也是函数的一种特殊形态。
未来我们还会学到例如`if, else, while, for`等内置函数。

这一节，我们重点介绍如何定义新的函数。
注意：计算机语言中的函数，和数学语言中常常提到的函数不是一个概念。
前者有着更宽泛的定义。

函数是代码的主要形态，甚至可以说是唯一形态。可以说代码就是由函数构成的。
如果说中文和英文是由文字和单词构成的，那么函数就如同自然语言中的文字或单词。
只不过，自然语言中的词汇是单向串联起来的，并且文字和单词的总量是基本固定的。
**但是计算机语言不同，我们在解决一个问题时，需要定义许许多多新的词汇（也就是函数），**
**再利用这些新的函数（也就是词汇）去描述某个领域中的输入和输出关系。**

所以每个程序，都有大量仅属于自己的词汇。
好的程序员能够更科学地定义这些词汇（也就是函数），让代码朗朗上口， 逻辑清晰，简洁而优美。
初级程序员由于不善于定义词汇，代码往往冗长，晦涩，不易阅读。

在NPL中，**我们可以用关键字function去创建一个新的函数。**
例如：我们定义一个变量JumpForward（中文是向前跳的意思），将后面的整个函数（function）赋给它。

```lua
local JumpForward = function(distance, maxHeight)
   -- 这里是函数的内容
end
```
**函数的定义是以`function()`开始，以`end`结束。**
**`()`内的内容为函数的输入，多个输入用`,`分开，每个输入需要指定一个局部变量名。**
上面的例子中就是distance（距离）和maxHeight（最大高度）。
在函数被调用时这两个局部变量会被赋值。  

**函数的内部可以有任意其他的函数。**
每个代码方块或文件中的代码都在一个我们看不见的函数内部。当代码方块被激活或文件被加载时，函数里面的代码就会被执行。

函数本身和字符串，数字一样，是一种数据类型，存在于一个固定的存储空间。
如果你定义的函数没有任何变量指向它，则函数会被释放掉。
**因此我们需要将新定义的函数，马上用`=函数`赋给一个变量，未来我们就可以用这个变量来调用函数。**

下面是一种更友善的定义函数的语法，和上面是完全等价的， 但是省去了=。
也就是function和end之间的代码会在`JumpForward`这个函数被调用时执行。

```lua
local function JumpForward(distance, maxHeight)
   -- 这里是函数的内容
end
```
无论哪种写法，其实`JumpForward`都是一个本地变量。
当然我们也可以用全局变量，去掉上面代码中的local，例如这样：

```lua
function JumpForward(distance, maxHeight)
end
```
或者像这样：
```lua
JumpForward = function(distance, maxHeight)
end
```
甚至, 我们可以用多个不同的变量指向同一个函数，例如像这样：
```lua
function JumpForward(distance, maxHeight)
end
local DoJump = JumpForward
```
**但是通常，我们都只用一个固定的变量名来指向一个函数。**
**因此，这个变量名也被叫做函数名。**

### 动手练习
动手实现本视频中的代码，并尝试做些修改。
