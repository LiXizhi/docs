## 《秘密花园》第二节
 
提示：如视频播放不了，可在课程项目世界里，点击“讲解回放”进行观看。
 
<video width="100%" controls controlslist="nodownload nofullscreen noremoteplayback" disablePictureInPicture>
  <source src="https://api.keepwork.com/ts-storage/siteFiles/21810/raw#秘密花园L2.webm" type="video/webm" />
  <source src="https://api.keepwork.com/ts-storage/siteFiles/21809/raw#秘密花园L2.mp4" type="video/mp4" />
   
  你的浏览器不支持播放
</video>
<style>
video::-webkit-media-controls-fullscreen-button { display: none; } 
</style>

## 字幕


通过第一节课的学习，迷宫的起点和终点已经成功添加好了
并且我们学习了如何使用代码方块控制主角
点击拉杆，启动程序
可以看到在上节课我们已经实现的迷宫效果
当主角在移动的过程中通过起点和终点时都会有相应的提示
为了增加迷宫的挑战性，这节课我们编程设计一个迷宫倒计时吧


### 步骤一

点击E按钮，打开工具栏
我们在场景中新增一个代码方块，来设计迷宫倒计时
并且使用广播消息指令作为该功能的开关
当收到广播消息“start”时，开始倒计时
倒计时涉及到数据的不断变化
在编程中，变量可以帮助我们实现这样的效果
点击数据标签，可以看到与变量相关的一些指令
将【全局变量赋值为】指令拖入代码编辑区，修改变量名为time，变量的值为60
然后，使用显示全局变量的指令，在屏幕左上角显示这个变量
为了方便测试，我们可以先在程序下方添加一个【发送广播“start”】指令
点击运行，可以看到变量在屏幕左上角显示出来了，但有点偏小
我们调整变量的大小参数为30，再次点击运行，可以看到字体变大了一些
到这里，设计迷宫倒计时的第一步就顺利完成了

### 步骤二

在上一小节，我们已经实现了迷宫倒计时的第一步
使用全局变量“time”记录倒计时，初始化并在屏幕上显示
这一小节，我们继续编写程序，实现倒计时变化的效果
右键打开关于倒计时的代码方块，点击数据标签
拖出【全局变量赋值为】指令，设置要修改数值的变量为“time”
然后，将运算标签下的【0+0】指令拖出来
让变量“time”在原来的基础上减少1
点击运行，可以看到，屏幕上显示的数值不再是60，而是59
想要实现倒计时变量不断减少的效果，我们还需要用到前面学习过的【永远重复】指令
将【永远重复】指令拖过来，【等待1秒】指令拖入【永远重复】指令里面
结合【等待1秒】指令，实现每隔一秒，倒计时减少1的效果
点击运行，可以看到，每间隔一秒，倒计时就减少1
到这里，倒计时的效果还差最后一步就成功实现了

### 步骤三

经过前面两个小节，倒计时的功能已经实现的差不多了
不过，有一个小问题就是倒计时为0的时候并没有停止
接下来，我们继续编程，实现倒计时结束时停止迷宫程序的效果吧
右键打开关于倒计时的代码方块
将控制标签下的【如果那么】指令放入【重复执行】指令的里面
然后从运算标签下，拖出【0大于0】比较运算指令
在倒计时减少的过程中，不断侦测变量“time”的值是否小于等于0
如果小于等于0，让主角说“时间到，游戏结束”，持续2秒
接着，结束迷宫程序
最后，我们再删除掉之前用来测试的【广播消息】指令
迷宫倒计时，应该在主角走入迷宫时才开始启动
所以，我们可以在主角碰到迷宫起点标识时
发送广播消息“start”,启动迷宫倒计时
打开控制主角的代码方块，将【广播消息】指令拖过来
修改名称为“start”，关闭代码方块，开启拉杆来体验一下吧
到这里，迷宫倒计时的交互效果就顺利完成啦
关于迷宫，还可以设计什么内容来丰富它呢？
比如迷宫机关门？添加迷宫规则？
下节课， 我们继续学习如何让我们的迷宫更加丰富！
