## 《密室逃脱》第二节
 
提示：如视频播放不了，可在课程项目世界里，点击“讲解回放”进行观看。
 
 ## 课程学习
<video width="100%" controls controlslist="nodownload nofullscreen noremoteplayback" disablePictureInPicture>
  <source src="https://api.keepwork.com/ts-storage/siteFiles/21741/raw#密室逃脱L2.webm" type="video/webm" />
  <source src="https://api.keepwork.com/ts-storage/siteFiles/21740/raw#密室逃脱L2.mp4" type="video/mp4" />
   
  你的浏览器不支持播放
</video>
<style>
video::-webkit-media-controls-fullscreen-button { display: none; } 
</style>


### 步骤一

经过第一节课的学习，我们已经设置好了如何打开密室的第一扇门
这一节课，我们来打造密室的第一个房间，设计打开第二道门的机关
点击门口的按钮，打开第一道门，进入密室的第一个房间
可以看到第二扇门的门口放置了一个宝箱
与打开门类似，我们先来制作一段移开盖子打开宝箱的动画
右键选中盖子，点击属性
弹出窗口，修改名字为lid，同时将物理属性修改为有真实物理
修改好后，点击E按钮，打开工具栏
选择电影标签下的电影方块，右键放置于场景中
打开电影方块，点击电影片段窗口中的+号，添加一个默认演员
接着，设置电影方块的静态属性，将左下角的属性切换为静态属性
点击右下角的+号，修改演员的名字为盖子的名字—door，并设置为全局角色
设置好后，点击确定，电影角色化身为盖子
同样的，我们需要删除摄影机，右键点击摄影机删除它
摄影机删除后，我们来制作移开盖子的动画
首先，修改电影方块的时间为1秒
然后，选中盖子角色，切换动作属性为位置属性
按下k键，生成第一个关键帧，记录下初始位置
接着，拖动时间轴来到1000毫秒的位置
往左拖动绿色坐标轴，让盖子往左打开
调整到合适位置，按下k键，生成关键帧
点击“到开始”按钮，回到初始位置
点击播放，可以看到盖子从右往左打开了
关闭电影方块，我们再来添加一个按钮
打开工具栏，选择电影方块下的按钮，右键放置于电影方块旁边
点击按钮，可以看到盖子打开了
打开之后再次右键打开电影方块，可以让盖子复位呢
到这里，一段打开盖子的动画就制作完成了

### 步骤二

上一小节，我们制作了一段打开宝箱盖子的动画
并且通过按钮可以激活电影方块，播放动画
有同学要说了，通过按钮激活的方式这么明显，想打开宝箱那也太容易了
如果删除按钮，还有没有其他方法激活电影方块，打开宝箱呢？
当然有了！这一小节，我们就来学习一条新的命令—激活方块命令
使用它，我们可以激活任意位置的电影方块
点击打开工具栏，选择代码标签下的代码方块
右键放置于场景中，打开代码方块，切换到图块模式
在事件标签下，找到【执行命令】指令
拖出放置到代码编辑区
【执行命令】指令有两个输入框
第一输入框代表要执行的命令，第二个输入框代表对应命令的参数
我们先点击第一个输入框，下拉选择激活方块命令
第二个输入框，我们需要填入待激活方块的坐标参数
这里，我们要激活电影方块，所以我们将鼠标放到电影方块上
同时按住Ctrl键和T键可以获取到这个电影方块的坐标
然后按住Ctrl键和V键将获取到的坐标粘贴到第二个输入框中
点击运行，我们可以看到宝箱盖子成功被打开了
这里，代码方块不需要控制它旁边的电影方块
所以，我们可以删除掉这个多余的电影方块
最后，在代码方块旁添加一个拉杆
点击启动拉杆，就可以看到宝箱再次被打开的效果啦

### 步骤三

上一小节，我们学习了激活方块命令
通过它，我们可以激活任意位置的方块
现在，我们只需要开启拉杆，就可以看到宝箱盖子被打开了
不过开启拉杆启动和点击按钮启动的方式好像相差不大
所以，我们需要继续优化
如果把启动装置设置到盖子本身是不是更好呢？
接下来，我们实现点击盖子就让宝箱打开的效果
右键选中盖子，点击属性，打开属性窗口
给盖子添加一个点击事件，open1
当盖子被点击时，就发送广播open1
接着，我们打开上节课的代码方块，修改一下程序
在事件标签下找到【当收到消息时】指令，拖出放置到代码编辑区
修改参数为open1，将【执行命令】指令放到【当收到消息时】指令里面
表示当收到广播消息“open1”时，才激活电影方块
点击运行，再点击盖子，我们可以看到宝箱成功打开了
点击启动拉杆，保持程序持续运行
到这里，点击盖子，打开宝箱的效果就实现了

### 步骤四

前面的三小节，我们实现了如何打开宝箱
宝箱打开了，通往第二个房间的大门还是紧闭的呢
这一小节，我们来设置如何打开第二扇门
点击盖子，打开宝箱，可以看到宝箱里面放置了一个红色的龙头模型
我们可以看到在红色大门的旁边放置了一个电影方块
打开电影方块，播放一下看看，可以看到旁边的红色大门打开了
原来这是控制红色大门打开的动画呢
开门的动画已经有了，想要让门打开，那就简单了
我们只需要激活这个电影方块就可以了
接下来，我们编程实现拖出红色龙头模型，打开红色大门的效果
跟点击盖子打开宝箱的方法类似，我们先右键选中红色龙头
点击属性，让龙头在结束拖动时发送广播消息open2
然后，打开代码方块，修改程序
需要添加的程序是类似的，这里可以选择复制整块
复制好后，修改广播消息为open2
接着，同时按住Ctrl键和T键获取门口处电影方块的坐标
坐标复制好后，按住Ctrl键和V键替换激活方块命令的坐标参数
点击运行，拖出红色雕像，可以看到红色大门被顺利打开了
关闭代码方块，我们可以将代码方块移到墙边
这样，整个场景看起来就更加规整啦